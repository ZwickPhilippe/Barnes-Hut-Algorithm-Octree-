# Barnes-Hut-Algorithm-Octree-

In order to simulate the movement of planets or "bodies" it is necessary to calculate the force, that these planets apply to each other. Depending on the mass, force is exerted, which can lead to some planets pushing each other away, or being attracted by a body with a bigger mass. To calculate the individual force that one planet experiences it is necessary to iterate and check all other planets and then calculate (based on distance and mass) the force that moves our planet. This brute-force method however is very time-consuming and slow. The *Barnes-Hut algorithm* does, in contrary to the brute-force summarize planet-groups if they fulfil a certain formula and sees the whole octant in which they are situated, as one body. Therefore, it is not necessary to calculate the force to each individual planet of the group, but just calculate the force to the whole octant. Of course, this leads to an inaccuracy, but will still represent the simulation accurately, as the mistake in the calculated force is close to zero. More information on the Barnes-Hut algorithm can be found here: http://arborjs.org/docs/barnes-hut

## Octree
The planets are stored in an octree, which represents a 3D space with a positive/negative x-,y- and z-axis. One cycle of the simulation consists of the force calculation of each planet, then the movement (= update of the new position) of each planet and then a rebuild of the three, which is necessary, to rearrange the planets in their correct octant. Each node of the tree can be divided into different groups: If a node has no children, it is the only planet in that octant. If a new planet come to join the current node, the octant (which now contains 2 nodes) will be split into 8 new octants and both nodes are rearranged into their correct space. This results in two types of nodes: empty nodes with children and non-empty nodes with no children.
## StdDraw and running the program
Using StdDraw the movement of the planets is visualized. To run the program, the planet-size can be specified in the console (10 000 planets are easily possible, simulation speed decreased depending on the number of planets). Next it is necessary to specify if the calculation method for the algorithm should take the centre of each octant, or the centre of mass of octant. Usually, the centre of mass is used (and recommended by me), but also the centre of octant is working. Then it is necessary to choose between a random creation of the planets, or two clusters that are located in upper-right and lower-left corner together with a sun. Afterwards, the StdDraw window should open and start the simulation.

![Barnes-Hut Simulation](https://user-images.githubusercontent.com/74874980/127764945-d44b4e50-5b8d-430c-a31c-2b21aeadc0ea.gif )
![Barnes-Hut Simulation RandomPlanets](https://user-images.githubusercontent.com/74874980/127765210-4d46080d-d1d8-4aa6-aec3-6a35de2b3ced.gif)
